<!DOCTYPE html>
<html lang="tr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ŞEBEKE - Akademik OS</title>

  <!-- 1. TAILWIND CSS (Tasarım için) -->
  <script src="https://cdn.tailwindcss.com"></script>

  <!-- 2. IMPORT MAP (Kütüphaneleri İnternetten Çekmek İçin) -->
  <script type="importmap">
  {
    "imports": {
      "react": "https://esm.sh/react@18.2.0",
      "react-dom/client": "https://esm.sh/react-dom@18.2.0/client",
      "lucide-react": "https://esm.sh/lucide-react@0.263.1",
      "firebase/app": "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js",
      "firebase/auth": "https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js",
      "firebase/firestore": "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js"
    }
  }
  </script>

  <!-- 3. BABEL (React Kodunu Tarayıcının Anlaması İçin) -->
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

  <!-- Fontlar -->
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600&family=Space+Grotesk:wght@400;500;700&display=swap');
    body { font-family: 'Inter', sans-serif; }
    h1, h2, h3, h4, h5, .brand-font { font-family: 'Space Grotesk', sans-serif; }
    .login-gradient { background: radial-gradient(circle at top right, #4f46e5 0%, #0f172a 40%, #000000 100%); }
    ::-webkit-scrollbar { width: 6px; }
    ::-webkit-scrollbar-track { background: transparent; }
    ::-webkit-scrollbar-thumb { background: #cbd5e1; border-radius: 3px; }
  </style>
</head>
<body>
  
  <div id="root"></div>

  <!-- ANA UYGULAMA KODU -->
  <script type="text/babel" data-type="module">
    import React, { useState, useEffect } from 'react';
    import ReactDOM from 'react-dom/client';
    import { 
      Layout, Search, Plus, Users, FileText, Video, ExternalLink, 
      Bell, UserCircle, MessageSquare, Filter, CheckCircle, Share2, 
      Menu, X, Microscope, Briefcase, GraduationCap, Clock, MapPin, 
      ChevronRight, Send, ArrowRight, Layers, Target, Link as LinkIcon,
      Calendar, Trash2, Coins, Globe, Bookmark, Award, LogIn, Lock, Mail, LogOut
    } from 'lucide-react';

    import { initializeApp } from "firebase/app";
    import { 
      getAuth, 
      signInWithEmailAndPassword, 
      createUserWithEmailAndPassword, 
      signOut, 
      onAuthStateChanged,
      updateProfile
    } from "firebase/auth";
    import { getFirestore } from "firebase/firestore";

    // --- FIREBASE AYARLARI ---
    // Google Console'dan aldığın kodları buraya yapıştıracaksın:
    const firebaseConfig = {apiKey: "AIzaSyAxhDxirgZ8-4g1xDZsoeyZnMnPHakr4_4",
  authDomain: "shebeke-b3ad0.firebaseapp.com",
  projectId: "shebeke-b3ad0",
  storageBucket: "shebeke-b3ad0.firebasestorage.app",
  messagingSenderId: "759627177868",
  appId: "1:759627177868:web:3ffb3dd03a919cdd1940a9"
      // apiKey: "...",
      // authDomain: "...",
      // projectId: "...",
      // ...
    };

    // Firebase Başlatma
    let auth;
    try {
      // Config boşsa hata vermemesi için kontrol
      if (firebaseConfig.apiKey) {
        const app = initializeApp(firebaseConfig);
        auth = getAuth(app);
      } else {
        console.warn("Firebase config eksik. Demo modunda çalışıyor.");
      }
    } catch (e) {
      console.error("Firebase Hatası:", e);
    }

    // --- MOCK DATA ---
    const NETWORK_NODES = [
      { id: 'c1', x: 250, y: 250, r: 50, label: "AI", type: 'topic', color: "#6366f1" },
      { id: 'c2', x: 650, y: 250, r: 50, label: "Çevre", type: 'topic', color: "#10b981" },
      { id: 'n1', x: 350, y: 200, r: 20, label: "Dr. Ali", type: 'person', color: "#6366f1", field: "Derin Öğrenme" },
      { id: 'n2', x: 550, y: 280, r: 20, label: "Prof. Oya", type: 'person', color: "#10b981", field: "Su Yönetimi" },
    ]; 
    const NETWORK_LINKS = [
      { source: 'c1', target: 'n1', opacity: 0.5 },
      { source: 'c2', target: 'n2', opacity: 0.5 },
      { source: 'n1', target: 'n2', opacity: 0.3, dashed: true },
    ];
    const GRANTS_DATA = [
      {
        id: 1001, source: "TÜBİTAK", programCode: "1001", program: "Bilimsel ve Teknolojik Araştırma Projeleri",
        title: "2025 Yılı 1. Dönem Proje Başvuruları", deadline: "2025-03-22", budget: "1.650.000 ₺",
        type: "Ulusal", category: "TÜBİTAK", matchScore: 98, tags: ["Temel Bilimler", "Mühendislik", "Sosyal Bilimler"],
        description: "Yeni bilgiler üretilmesi, teknolojik problemlerin çözümlenmesi amacıyla yapılan Ar-Ge projelerini destekler.", logo: "TR"
      },
      {
        id: 102, source: "HORIZON EUROPE", programCode: "CL6-2024", program: "Cluster 6: Food, Bioeconomy",
        title: "Fair, healthy and environmentally-friendly food systems", deadline: "2025-02-15", budget: "€4.000.000",
        type: "Uluslararası", category: "AB / Horizon", matchScore: 45, tags: ["Gıda Müh.", "Sürdürülebilirlik"],
        description: "Adil, sağlıklı ve çevre dostu gıda sistemleri üzerine uluslararası konsorsiyum çağrısı.", logo: "EU"
      }
    ];

    // --- UYGULAMA BİLEŞENİ ---
    function SebekeApp() {
      const [user, setUser] = useState(null); 
      const [authLoading, setAuthLoading] = useState(true);
      const [activeTab, setActiveTab] = useState('dashboard'); 
      const [sidebarOpen, setSidebarOpen] = useState(true);
      const [filterCategory, setFilterCategory] = useState('Tümü');

      useEffect(() => {
        if (auth) {
          const unsubscribe = onAuthStateChanged(auth, (currentUser) => {
            setUser(currentUser);
            setAuthLoading(false);
          });
          return () => unsubscribe();
        } else {
          setAuthLoading(false);
        }
      }, []);

      const handleLogout = async () => {
        if (auth) await signOut(auth);
        else setUser(null);
      };

      // --- LOGIN PAGE ---
      const LoginPage = () => {
        const [isRegister, setIsRegister] = useState(false);
        const [email, setEmail] = useState('');
        const [password, setPassword] = useState('');
        const [name, setName] = useState('');
        const [error, setError] = useState('');
        const [loading, setLoading] = useState(false);

        const handleAuth = async (e) => {
          e.preventDefault();
          setLoading(true);
          setError('');

          if (!auth) {
            setTimeout(() => {
              setUser({ email, displayName: name || "Dr. Akademisyen" });
              setLoading(false);
            }, 1000);
            return;
          }

          try {
            if (isRegister) {
              const userCredential = await createUserWithEmailAndPassword(auth, email, password);
              await updateProfile(userCredential.user, { displayName: name });
            } else {
              await signInWithEmailAndPassword(auth, email, password);
            }
          } catch (err) {
            setError(err.message.replace("Firebase:", "").replace("auth/", ""));
          } finally {
            setLoading(false);
          }
        };

        return (
          <div className="h-screen w-full login-gradient flex items-center justify-center p-4">
            <div className="bg-white/10 backdrop-blur-lg border border-white/20 p-8 rounded-2xl w-full max-w-md shadow-2xl text-white relative overflow-hidden">
              <div className="absolute -top-10 -right-10 w-32 h-32 bg-indigo-500 rounded-full blur-3xl opacity-30"></div>
              <div className="absolute -bottom-10 -left-10 w-32 h-32 bg-rose-500 rounded-full blur-3xl opacity-30"></div>

              <div className="text-center mb-8 relative z-10">
                <div className="w-16 h-16 bg-white rounded-xl flex items-center justify-center text-[#0f172a] mx-auto mb-4 shadow-lg transform rotate-3 hover:rotate-0 transition-transform duration-500">
                  <Share2 size={32} className="transform -rotate-45" />
                </div>
                <h1 className="text-3xl font-bold brand-font tracking-tight">ŞEBEKE</h1>
                <p className="text-indigo-200 text-sm font-medium tracking-widest uppercase mt-1">Akademik İşletim Sistemi</p>
              </div>

              <form onSubmit={handleAuth} className="space-y-4 relative z-10">
                {isRegister && (
                  <div>
                    <label className="block text-xs font-bold text-indigo-200 uppercase mb-1 ml-1">Ad Soyad / Unvan</label>
                    <div className="relative">
                      <UserCircle className="absolute left-3 top-3 text-indigo-300" size={18} />
                      <input type="text" placeholder="Dr. Ad Soyad" className="w-full bg-white/5 border border-indigo-300/30 rounded-xl py-3 pl-10 pr-4 text-white placeholder-indigo-300/50 focus:outline-none focus:bg-white/10 focus:border-indigo-400 transition-all" value={name} onChange={(e) => setName(e.target.value)} />
                    </div>
                  </div>
                )}
                <div>
                  <label className="block text-xs font-bold text-indigo-200 uppercase mb-1 ml-1">Kurumsal E-Posta</label>
                  <div className="relative">
                    <Mail className="absolute left-3 top-3 text-indigo-300" size={18} />
                    <input type="email" required placeholder="ad.soyad@universite.edu.tr" className="w-full bg-white/5 border border-indigo-300/30 rounded-xl py-3 pl-10 pr-4 text-white placeholder-indigo-300/50 focus:outline-none focus:bg-white/10 focus:border-indigo-400 transition-all" value={email} onChange={(e) => setEmail(e.target.value)} />
                  </div>
                </div>
                <div>
                  <label className="block text-xs font-bold text-indigo-200 uppercase mb-1 ml-1">Şifre</label>
                  <div className="relative">
                    <Lock className="absolute left-3 top-3 text-indigo-300" size={18} />
                    <input type="password" required placeholder="••••••••" className="w-full bg-white/5 border border-indigo-300/30 rounded-xl py-3 pl-10 pr-4 text-white placeholder-indigo-300/50 focus:outline-none focus:bg-white/10 focus:border-indigo-400 transition-all" value={password} onChange={(e) => setPassword(e.target.value)} />
                  </div>
                </div>
                {error && <div className="bg-rose-500/20 border border-rose-500/50 text-rose-200 text-xs p-3 rounded-lg flex items-center gap-2"><X size={14} /> {error}</div>}
                <button type="submit" disabled={loading} className="w-full bg-white text-[#0f172a] py-3.5 rounded-xl font-bold text-lg hover:bg-indigo-50 transition-all shadow-lg flex items-center justify-center gap-2 mt-6">
                  {loading ? <span className="animate-spin h-5 w-5 border-2 border-[#0f172a] border-t-transparent rounded-full"></span> : <>{isRegister ? 'Hesap Oluştur' : 'Giriş Yap'} <ArrowRight size={20} /></>}
                </button>
              </form>
              <div className="mt-6 text-center text-sm text-indigo-200">
                <p className="cursor-pointer hover:text-white transition-colors" onClick={() => setIsRegister(!isRegister)}>
                  {isRegister ? 'Zaten hesabınız var mı? Giriş Yapın' : 'Hesabınız yok mu? Akademisyen Kaydı Oluştur'}
                </p>
              </div>
            </div>
          </div>
        );
      };

      const SidebarItem = ({ id, icon: Icon, label, count }) => (
        <button onClick={() => { setActiveTab(id); if (window.innerWidth < 768) setSidebarOpen(false); }} className={`w-full flex items-center justify-between px-4 py-3 rounded-lg transition-all duration-200 group ${activeTab === id ? 'bg-[#0f172a] text-white shadow-lg' : 'text-slate-500 hover:bg-slate-50 hover:text-slate-900'}`}>
          <div className="flex items-center gap-3">
            <Icon size={20} className={activeTab === id ? "text-indigo-400" : "text-slate-400 group-hover:text-slate-600"} />
            <span className="font-medium tracking-wide text-sm">{label}</span>
          </div>
          {count && <span className="bg-indigo-100 text-indigo-700 text-[10px] font-bold px-2 py-0.5 rounded-full">{count}</span>}
        </button>
      );

      const GrantsView = () => {
        const filteredGrants = GRANTS_DATA.filter(g => filterCategory === 'Tümü' ? true : g.category === filterCategory);
        return (
          <div className="animate-in fade-in slide-in-from-bottom-4 duration-500 pb-10">
            <div className="flex flex-col md:flex-row justify-between items-end mb-8 gap-4">
              <div><h3 className="text-3xl font-bold text-[#0f172a] brand-font mb-2">Akıllı Hibe Motoru</h3><p className="text-slate-500 text-sm">Otomatik taranan güncel çağrılar.</p></div>
              <div className="flex bg-white p-1 rounded-xl border border-slate-200 shadow-sm overflow-x-auto">
                {['Tümü', 'TÜBİTAK', 'AB / Horizon'].map(cat => (
                  <button key={cat} onClick={() => setFilterCategory(cat)} className={`px-4 py-2 text-sm font-bold rounded-lg ${filterCategory === cat ? 'bg-[#0f172a] text-white' : 'text-slate-500'}`}>{cat}</button>
                ))}
              </div>
            </div>
            <div className="grid md:grid-cols-2 lg:grid-cols-2 gap-6">
              {filteredGrants.map(grant => (
                <div key={grant.id} className="grant-card bg-white rounded-xl border border-slate-200 p-6 transition-all relative group flex flex-col h-full">
                  <div className="flex justify-between items-start mb-4">
                    <div className="flex items-center gap-3">
                      <div className={`w-12 h-12 rounded-lg flex items-center justify-center text-white font-bold text-sm shadow-sm ${grant.source === 'TÜBİTAK' ? 'bg-red-600' : 'bg-blue-600'}`}>{grant.logo}</div>
                      <div><span className="text-xs font-bold text-slate-400 uppercase">{grant.source}</span><h5 className="font-bold text-slate-800 text-sm">{grant.program}</h5></div>
                    </div>
                    <span className="bg-emerald-100 text-emerald-700 text-xs font-bold px-2 py-1 rounded-full border border-emerald-200">%{grant.matchScore}</span>
                  </div>
                  <h4 className="text-lg font-bold brand-font mb-2">{grant.title}</h4>
                  <p className="text-xs text-slate-500 mb-4 line-clamp-2">{grant.description}</p>
                  <div className="flex items-center justify-between pt-4 border-t border-slate-100 mt-auto">
                    <span className="font-bold text-slate-800 text-sm flex gap-1"><Coins size={14}/> {grant.budget}</span>
                    <span className="font-bold text-emerald-600 text-sm flex gap-1"><Calendar size={14}/> {grant.deadline}</span>
                  </div>
                </div>
              ))}
            </div>
          </div>
        );
      };

      const NetworkView = () => (
        <div className="h-full flex flex-col animate-in fade-in duration-500 pb-10">
          <div className="flex justify-between items-end mb-4"><div><h3 className="text-2xl font-bold text-[#0f172a] brand-font">Bilgi Ağı</h3><p className="text-slate-500 text-sm">Disiplinlerarası bağlantı haritası.</p></div></div>
          <div className="relative flex-1 bg-[#0f172a] rounded-2xl overflow-hidden shadow-2xl border border-slate-800">
            <div className="absolute inset-0 opacity-20 pointer-events-none" style={{ backgroundImage: 'radial-gradient(#6366f1 1px, transparent 1px)', backgroundSize: '40px 40px' }}></div>
            <svg className="w-full h-full">
              {NETWORK_LINKS.map((link, i) => {
                const s = NETWORK_NODES.find(n => n.id === link.source);
                const t = NETWORK_NODES.find(n => n.id === link.target);
                if (!s || !t) return null;
                return <line key={i} x1={s.x} y1={s.y} x2={t.x} y2={t.y} stroke={link.dashed ? "#fff" : "#6366f1"} strokeWidth="2" strokeOpacity={link.opacity} strokeDasharray={link.dashed ? "5,5" : "0"} />;
              })}
              {NETWORK_NODES.map((node) => (
                 <g key={node.id}><circle cx={node.x} cy={node.y} r={node.r} fill={node.color} className="cursor-pointer hover:opacity-80 transition-opacity" /><text x={node.x} y={node.y} dy=".3em" textAnchor="middle" className="fill-white text-[10px] font-bold pointer-events-none">{node.label}</text></g>
              ))}
            </svg>
          </div>
        </div>
      );

      if (authLoading) return <div className="h-screen w-full flex items-center justify-center bg-[#f8fafc]"><div className="animate-spin w-10 h-10 border-4 border-[#0f172a] border-t-transparent rounded-full"></div></div>;

      if (!user) return <LoginPage />;

      return (
        <div className="flex h-screen bg-[#f8fafc] text-slate-900 overflow-hidden font-inter">
          <aside className={`fixed md:static z-20 h-full w-72 bg-white border-r border-slate-200 flex flex-col transition-transform transform ${sidebarOpen ? 'translate-x-0' : '-translate-x-full md:translate-x-0'}`}>
            <div className="p-6 border-b border-slate-100">
              <div className="flex items-center gap-3 cursor-pointer" onClick={() => setActiveTab('dashboard')}>
                <div className="w-10 h-10 bg-[#0f172a] rounded-xl flex items-center justify-center text-white shadow-xl"><Share2 size={24} className="transform -rotate-45" /></div>
                <div><h1 className="text-2xl font-bold tracking-tight text-[#0f172a] leading-none brand-font">ŞEBEKE</h1><span className="text-[10px] font-bold tracking-[0.2em] text-indigo-600 uppercase">Akademik OS</span></div>
              </div>
            </div>
            <nav className="flex-1 p-4 space-y-1.5 overflow-y-auto">
              <SidebarItem id="dashboard" icon={Layout} label="Panelim" />
              <SidebarItem id="funds" icon={Coins} label="Fonlar & Hibeler" count="5" />
              <SidebarItem id="network" icon={Share2} label="Bilgi Ağı" />
              <SidebarItem id="create" icon={Plus} label="Yeni Proje Başlat" />
              <SidebarItem id="lab" icon={Microscope} label="Lab & Kaynak" count="4" />
              <SidebarItem id="jobs" icon={Briefcase} label="İlanlar" count="12" />
              <SidebarItem id="messages" icon={MessageSquare} label="Mesajlar" count="2" />
            </nav>
            <div className="p-4 border-t border-slate-100 bg-slate-50/50">
              <div className="flex items-center gap-3 p-2">
                <div className="w-10 h-10 rounded-full bg-[#0f172a] flex items-center justify-center text-white font-bold brand-font text-sm">{user.displayName ? user.displayName.substring(0,2).toUpperCase() : "DR"}</div>
                <div className="overflow-hidden flex-1"><p className="text-sm font-bold text-[#0f172a] truncate">{user.displayName || "Kullanıcı"}</p><p className="text-xs text-slate-500 truncate">{user.email}</p></div>
                <button onClick={handleLogout} className="text-slate-400 hover:text-red-600 p-2 rounded-lg hover:bg-red-50 transition-colors"><LogOut size={18}/></button>
              </div>
            </div>
          </aside>
          <main className="flex-1 flex flex-col h-full relative w-full">
            <header className="bg-white/90 backdrop-blur-sm border-b border-slate-200 h-16 flex items-center px-8 justify-between shrink-0 sticky top-0 z-10">
              <div className="flex items-center gap-4">
                 <button className="md:hidden text-slate-600" onClick={() => setSidebarOpen(true)}><Menu size={24}/></button>
                 <h2 className="text-lg font-bold brand-font text-slate-800">{activeTab === 'funds' ? 'Hibe Takip Sistemi' : activeTab === 'dashboard' ? 'Genel Bakış' : activeTab === 'network' ? 'Bilgi Ağı' : activeTab === 'lab' ? 'Kaynak Yönetimi' : activeTab === 'create' ? 'Proje Sihirbazı' : 'Şebeke'}</h2>
              </div>
              <div className="flex items-center gap-6">
                <div className="hidden md:flex items-center bg-slate-50 border border-slate-200 rounded-lg px-3 py-1.5 w-64"><Search size={16} className="text-slate-400 mr-2" /><input type="text" placeholder="Ağda ara..." className="bg-transparent text-sm focus:outline-none w-full" /></div>
                <button className="relative text-slate-400 hover:text-[#0f172a] transition-colors"><Bell size={20} /><span className="absolute top-0 right-0 w-2 h-2 bg-rose-500 rounded-full border-2 border-white"></span></button>
              </div>
            </header>
            <div className="flex-1 overflow-y-auto p-6 md:p-8 bg-[#f8fafc]">
              {activeTab === 'funds' && <GrantsView />}
              {activeTab === 'network' && <NetworkView />}
              {activeTab === 'dashboard' && <div className="text-center p-20 text-slate-400 border-2 border-dashed border-slate-300 rounded-2xl">Genel Bakış Paneli (Yapım Aşamasında)</div>}
              {activeTab === 'create' && <div className="text-center p-20 text-slate-400 border-2 border-dashed border-slate-300 rounded-2xl">Proje Sihirbazı (Önceki Modülden Eklenebilir)</div>}
              {activeTab === 'lab' && <div className="text-center p-20 text-slate-400 border-2 border-dashed border-slate-300 rounded-2xl">Lab Envanteri (Önceki Modülden Eklenebilir)</div>}
            </div>
          </main>
        </div>
      );
    }

    const root = ReactDOM.createRoot(document.getElementById('root'));
    root.render(<SebekeApp />);
  </script>
</body>
</html>


  